# 管理账户设置页面设计方案

## 设计概述

账户设置页面是用户管理个人信息、安全设置和系统偏好的核心功能模块。基于现有的管理系统架构，采用标签页（Tabs）的设计模式，将不同类型的设置分组管理，提供清晰的用户体验。

## 页面结构

### 1. 页面布局
- **头部标题区域**：显示页面标题和简要说明
- **标签页导航**：水平标签页设计，包含图标和文字标签
- **内容区域**：使用Card组件承载各类设置表单
- **操作按钮**：每个设置区域都有对应的保存按钮

### 2. 标签页设计

#### 🧑‍💼 基础信息 (Profile)
**功能**：管理用户的基本个人信息
- **头像设置**
  - 显示当前头像预览
  - 支持头像上传功能（JPG/PNG，最大2MB）
  - 提供头像删除选项
- **个人信息表单**
  - 姓名（姓、名分别输入）
  - 邮箱地址（必填，带验证）
  - 手机号码
  - 工号（带重复检查）
  - 所属部门（下拉选择）
  - 职称（下拉选择）
- **表单验证**
  - 邮箱格式验证
  - 工号唯一性检查（防抖处理）
  - 必填项提示

#### 🔒 安全设置 (Security)
**功能**：管理账户安全相关设置
- **密码修改**
  - 当前密码输入
  - 新密码输入（带强度指示器）
  - 确认密码输入
  - 密码强度检测（弱/一般/较强/强）
  - 密码规则提示（至少8位，包含大小写字母和数字）
- **登录安全**
  - 最后登录时间显示
  - 最后登录IP显示
  - 登录设备管理（可扩展）
- **两步验证**（可扩展功能）
  - 手机验证
  - 邮箱验证
  - 验证器应用

#### ⚙️ 个人偏好 (Preferences)
**功能**：管理用户的系统使用偏好
- **外观设置**
  - 主题模式选择（浅色/深色/跟随系统）
  - 语言设置（中文/英文）
  - 字体大小调整
- **通知设置**
  - 邮件通知开关
  - 浏览器通知开关
  - 系统通知开关
  - 通知类型细分设置
- **隐私设置**
  - 显示在线状态
  - 显示最后登录时间
  - 允许私信
  - 个人信息可见性设置
- **系统偏好**
  - 默认页面设置
  - 表格每页显示数量
  - 数据导出格式偏好

#### 📋 操作日志 (Logs)
**功能**：查看个人操作历史记录
- **日志列表**
  - 操作类型（创建/更新/删除/查看等）
  - 操作描述
  - 操作时间
  - IP地址
  - 操作状态
- **筛选功能**
  - 按时间范围筛选
  - 按操作类型筛选
  - 按操作状态筛选
- **导出功能**
  - 支持导出操作日志
  - 可选择导出格式（Excel/CSV）

## 技术实现

### 1. 前端技术栈
- **UI框架**：HeroUI (NextUI)
- **状态管理**：React Hooks (useState, useEffect)
- **表单处理**：受控组件
- **图标库**：Lucide React
- **通知系统**：React Hot Toast
- **文件上传**：原生File API

### 2. 后端API设计
```typescript
// 用户信息更新
PUT /api/accounts/profile/
{
  first_name: string,
  last_name: string,
  email: string,
  phone: string,
  employee_id: string,
  department_id: number,
  job_title_id: number
}

// 密码修改
POST /api/accounts/change-password/
{
  old_password: string,
  new_password: string
}

// 头像上传
POST /api/accounts/avatar/
FormData: { avatar: File }

// 用户设置
PUT /api/accounts/settings/
{
  theme: string,
  language: string,
  notifications: object,
  privacy: object
}

// 操作日志查询
GET /api/accounts/logs/
?page=1&page_size=10&operation_type=&start_date=&end_date=
```

### 3. 数据验证
- **前端验证**：实时表单验证，用户体验友好
- **后端验证**：数据安全性验证，防止恶意数据
- **防抖处理**：工号重复检查等异步验证

## 用户体验设计

### 1. 交互设计
- **响应式布局**：支持桌面端和移动端
- **加载状态**：所有异步操作都有加载指示器
- **错误处理**：友好的错误提示和处理
- **保存确认**：操作成功后的明确反馈

### 2. 可访问性
- **键盘导航**：支持Tab键导航
- **屏幕阅读器**：适当的aria标签
- **颜色对比度**：符合WCAG标准
- **焦点管理**：清晰的焦点指示

### 3. 性能优化
- **懒加载**：标签页内容按需加载
- **防抖处理**：避免频繁API调用
- **图片优化**：头像上传时的压缩处理
- **缓存策略**：用户设置的本地缓存

## 安全考虑

### 1. 数据安全
- **敏感信息保护**：密码等敏感数据不在前端存储
- **文件上传安全**：限制文件类型和大小
- **XSS防护**：所有用户输入都经过转义
- **CSRF防护**：使用CSRF令牌

### 2. 权限控制
- **身份验证**：确保用户已登录
- **权限验证**：只能修改自己的信息
- **操作日志**：记录所有敏感操作
- **会话管理**：安全的会话处理

## 扩展功能

### 1. 高级安全功能
- **两步验证**：手机/邮箱验证码
- **登录设备管理**：查看和管理登录设备
- **安全问题设置**：密码找回安全问题
- **登录异常通知**：异地登录提醒

### 2. 个性化功能
- **主题自定义**：自定义颜色主题
- **快捷键设置**：个人快捷键偏好
- **工作台布局**：个性化仪表板
- **数据导出模板**：自定义导出格式

### 3. 社交功能
- **个人简介**：个人介绍和技能标签
- **工作状态**：在线状态和工作状态
- **团队协作**：团队成员互动设置
- **消息中心**：系统消息和通知中心

## 实施计划

### Phase 1: 基础功能（当前）
- ✅ 基础信息管理
- ✅ 密码修改功能
- ✅ 基础页面布局

### Phase 2: 增强功能
- 🔄 头像上传功能
- 🔄 个人偏好设置
- 🔄 操作日志查看

### Phase 3: 高级功能
- ⏳ 两步验证
- ⏳ 高级安全设置
- ⏳ 个性化主题

### Phase 4: 社交与协作
- ⏳ 社交功能
- ⏳ 团队协作设置
- ⏳ 高级个性化

## 总结

账户设置页面是用户管理系统的重要组成部分，通过合理的信息架构和用户体验设计，为用户提供便捷、安全、个性化的账户管理功能。采用模块化设计方案，便于后续功能扩展和维护升级。 